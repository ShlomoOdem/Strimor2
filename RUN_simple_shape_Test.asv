%% Run Simple Shape expirements
TestType = "C2C";
TestFile = dir("SimpleShapeAlg\Experiments");
TestFile([TestFile.isdir]) = [];

for ii = 1:numel(TestFile)
    if contains(TestFile(ii).name,TestType)
        load(fullfile(TestFile(ii).folder,TestFile(ii).name),"Exp","BasicWS","Solution")
        N = extractBetween(TestFile(ii).name,"N_","_");
        
        parfor k = 1:numel(Exp)
            if numel(Exp{k}) == 2
                StartNode = Exp{k}{1};
                TargetNode = Exp{k}{2};
                [Tree,error] = SimpleShapeAlgorithm(BasicWS,N,StartNode,TargetNode);
                if error
                    Solution{k} = "error";
                else
                    Solution{k} = {Tree};
                end
            else
                StartNode = Exp{k}{1};
                TargetNode = Exp{k}{2};
                [Tree1,error1] = SimpleShapeAlgorithm(BasicWS,N,StartNode,TargetNode);
                

                StartNode = Exp{k}{3};
                TargetNode = Exp{k}{2};
                [Tree2,error2] = SimpleShapeAlgorithm(BasicWS,N,StartNode,TargetNode);
                
                if error2 || error1
                    Solution{k} = "error"
                else
                    Solution{k} = {Tree1,Tree2};
                end
            end
        end


    end
end
